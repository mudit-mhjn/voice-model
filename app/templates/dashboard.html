{% extends "base.html" %}
{% block content %}
<section class="card">
  <h2>Clinician Dashboard</h2>
  <p class="muted">All saved predictions (SQLite). Click a patient to see features + segments.</p>

  <div class="tableWrap">
    <table class="table">
      <thead>
        <tr>
          <th>Patient ID</th><th>Name</th><th>Age</th><th>Gender</th><th>Duration</th><th>Predicted</th><th>Actual</th>
        </tr>
      </thead>
      <tbody>
      {% for r in rows %}
        <tr>
          <td>{{ r.id }}</td>
          <td>{{ r.name }}</td>
          <td>{{ r.age }}</td>
          <td>{{ r.gender }}</td>
          <td>{{ "%.2f"|format(r.duration_sec) }}s</td>
          <td><span class="tag">{{ r.predicted_label }}</span></td>
          <td>
            {% if r.actual_label %}
              <span class="tag">{{ r.actual_label }}</span>
            {% else %}
              <span class="tag" style="opacity: 0.5;">Not Set</span>
            {% endif %}
          </td>
          <td><a class="btn small" href="/dashboard/patient/{{ r.id }}">Open</a></td>
        </tr>
      {% endfor %}
      </tbody>
    </table>
  </div>

  {% if total_pages > 1 %}
  <div style="margin-top: 20px; display: flex; justify-content: center; align-items: center; gap: 10px;">
    {% if page > 1 %}
      <a href="/dashboard?page={{ page - 1 }}" class="btn small">Previous</a>
    {% else %}
      <span class="btn small" style="opacity: 0.5; cursor: not-allowed;">Previous</span>
    {% endif %} 
    <span class="muted" style="padding: 0 10px;">
      Page {{ page }} of {{ total_pages }} ({{ total_count }} total)
    </span> 
    {% if page < total_pages %}
      <a href="/dashboard?page={{ page + 1 }}" class="btn small">Next</a>
    {% else %}
      <span class="btn small" style="opacity: 0.5; cursor: not-allowed;">Next</span>
    {% endif %}
  </div>
  {% endif %}
</section>
{% endblock %}
